import{_ as oe,o as z,c as j,p as ie,a as re,b as l,d as r,e as te,f as x,g as Je,h as ft,w as Z,r as N,T as Qe,i as Re,v as Ae,n as ht,j as Me,k as mt,l as vt,m as _t,F as ve,q as ke,s as Xe,t as gt,u as yt,x as bt,y as wt,z as et,A as ce,B as tt,C as A,D as be,E as ze,G as Dt,H as We,I as St}from"./index-cb6920fd.js";import{c as J,e as Q,g as kt,n as q,m as E,a as ot,w as ue,B as xt,I as Ne,p as Le,t as O,u as we,b as Ct,o as nt,d as pt,f as at,h as $t,i as Ee,j as xe,P as Tt,H as It,k as ge,l as Te,q as he,r as st,s as Ot,v as Bt,x as ye,y as Ht,z as Ie,A as Pt,C as Oe,D as Rt,E as $e,F as At,G as Fe}from"./httpRequest-0b86582a.js";import{r as Mt,u as zt,c as Nt,a as Lt}from"./city-07c69032.js";import{f as De,g as Ue}from"./format-date-5ff5f463.js";import{u as Et,R as Ft,t as Vt}from"./index-default-d28a4e4f.js";const jt="/assets/home-banner-fdbe7fbf.png";const Wt={},Ut=e=>(ie("data-v-86223f9d"),e=e(),re(),e),qt={class:"navbar"},Yt=Ut(()=>l("div",{class:"title"},"KK旅途",-1)),Kt=[Yt];function Gt(e,t){return z(),j("div",qt,Kt)}const Zt=oe(Wt,[["render",Gt],["__scopeId","data-v-86223f9d"]]);let Jt=2e3;const Qt=()=>++Jt,[Xt,me]=J("loading"),eo=Array(12).fill(null).map((e,t)=>r("i",{class:me("line",String(t+1))},null)),to=r("svg",{class:me("circular"),viewBox:"25 25 50 50"},[r("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),oo={size:q,type:E("circular"),color:String,vertical:Boolean,textSize:q,textColor:String};var no=te({name:Xt,props:oo,setup(e,{slots:t}){const o=x(()=>Q({color:e.color},kt(e.size))),i=()=>{const c=e.type==="spinner"?eo:to;return r("span",{class:me("spinner",e.type),style:o.value},[t.icon?t.icon():c])},a=()=>{var c;if(t.default)return r("span",{class:me("text"),style:{fontSize:ot(e.textSize),color:(c=e.textColor)!=null?c:e.color}},[t.default()])};return()=>{const{type:c,vertical:h}=e;return r("div",{class:me([c,{vertical:h}]),"aria-live":"polite","aria-busy":!0},[i(),a()])}}});const lt=ue(no),[ao,se]=J("button"),so=Q({},Mt,{tag:E("button"),text:String,icon:String,type:E("default"),size:E("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:E("button"),loadingSize:q,loadingText:String,loadingType:String,iconPosition:E("left")});var lo=te({name:ao,props:so,emits:["click"],setup(e,{emit:t,slots:o}){const i=zt(),a=()=>o.loading?o.loading():r(lt,{size:e.loadingSize,type:e.loadingType,class:se("loading")},null),c=()=>{if(e.loading)return a();if(o.icon)return r("div",{class:se("icon")},[o.icon()]);if(e.icon)return r(Ne,{name:e.icon,class:se("icon"),classPrefix:e.iconPrefix},null)},h=()=>{let f;if(e.loading?f=e.loadingText:f=o.default?o.default():e.text,f)return r("span",{class:se("text")},[f])},d=()=>{const{color:f,plain:y}=e;if(f){const m={color:y?f:"white"};return y||(m.background=f),f.includes("gradient")?m.border=0:m.borderColor=f,m}},s=f=>{e.loading?Le(f):e.disabled||(t("click",f),i())};return()=>{const{tag:f,type:y,size:m,block:g,round:k,plain:S,square:M,loading:$,disabled:U,hairline:Y,nativeType:D,iconPosition:B}=e,L=[se([y,m,{plain:S,block:g,round:k,square:M,loading:$,disabled:U,hairline:Y}]),{[xt]:Y}];return r(f,{type:D,class:L,style:d(),disabled:U,onClick:s},{default:()=>[r("div",{class:se("content")},[B==="left"&&c(),h(),B==="right"&&c()])]})}}});const co=ue(lo),io={show:Boolean,zIndex:q,overlay:O,duration:q,teleport:[String,Object],lockScroll:O,lazyRender:O,beforeClose:Function,overlayStyle:Object,overlayClass:we,transitionAppear:Boolean,closeOnClickOverlay:O};let de=0;const qe="van-overflow-hidden";function ro(e,t){const o=Ct(),i="01",a="10",c=y=>{o.move(y);const m=o.deltaY.value>0?a:i,g=pt(y.target,e.value),{scrollHeight:k,offsetHeight:S,scrollTop:M}=g;let $="11";M===0?$=S>=k?"00":"01":M+S>=k&&($="10"),$!=="11"&&o.isVertical()&&!(parseInt($,2)&parseInt(m,2))&&Le(y,!0)},h=()=>{document.addEventListener("touchstart",o.start),document.addEventListener("touchmove",c,{passive:!1}),de||document.body.classList.add(qe),de++},d=()=>{de&&(document.removeEventListener("touchstart",o.start),document.removeEventListener("touchmove",c),de--,de||document.body.classList.remove(qe))},s=()=>t()&&h(),f=()=>t()&&d();nt(s),Je(f),ft(f),Z(t,y=>{y?h():d()})}function ct(e){const t=N(!1);return Z(e,o=>{o&&(t.value=o)},{immediate:!0}),o=>()=>t.value?o():null}const[uo,fo]=J("overlay"),ho={show:Boolean,zIndex:q,duration:q,className:we,lockScroll:O,lazyRender:O,customStyle:Object};var mo=te({name:uo,props:ho,setup(e,{slots:t}){const o=N(),i=ct(()=>e.show||!e.lazyRender),a=h=>{e.lockScroll&&Le(h,!0)},c=i(()=>{var h;const d=Q($t(e.zIndex),e.customStyle);return Ee(e.duration)&&(d.animationDuration=`${e.duration}s`),Re(r("div",{ref:o,style:d,class:[fo(),e.className]},[(h=t.default)==null?void 0:h.call(t)]),[[Ae,e.show]])});return at("touchmove",a,{target:o}),()=>r(Qe,{name:"van-fade",appear:!0},{default:c})}});const vo=ue(mo),_o=Q({},io,{round:Boolean,position:E("center"),closeIcon:E("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:E("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[go,Ye]=J("popup");var yo=te({name:go,inheritAttrs:!1,props:_o,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:o,slots:i}){let a,c;const h=N(),d=N(),s=ct(()=>e.show||!e.lazyRender),f=x(()=>{const v={zIndex:h.value};if(Ee(e.duration)){const F=e.position==="center"?"animationDuration":"transitionDuration";v[F]=`${e.duration}s`}return v}),y=()=>{a||(a=!0,h.value=e.zIndex!==void 0?+e.zIndex:Qt(),t("open"))},m=()=>{a&&Nt(e.beforeClose,{done(){a=!1,t("close"),t("update:show",!1)}})},g=v=>{t("clickOverlay",v),e.closeOnClickOverlay&&m()},k=()=>{if(e.overlay)return r(vo,{show:e.show,class:e.overlayClass,zIndex:h.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:g},{default:i["overlay-content"]})},S=v=>{t("clickCloseIcon",v),m()},M=()=>{if(e.closeable)return r(Ne,{role:"button",tabindex:0,name:e.closeIcon,class:[Ye("close-icon",e.closeIconPosition),It],classPrefix:e.iconPrefix,onClick:S},null)};let $;const U=()=>{$&&clearTimeout($),$=setTimeout(()=>{t("opened")})},Y=()=>t("closed"),D=v=>t("keydown",v),B=s(()=>{var v;const{round:F,position:X,safeAreaInsetTop:ne,safeAreaInsetBottom:_}=e;return Re(r("div",ke({ref:d,style:f.value,role:"dialog",tabindex:0,class:[Ye({round:F,[X]:X}),{"van-safe-area-top":ne,"van-safe-area-bottom":_}],onKeydown:D},o),[(v=i.default)==null?void 0:v.call(i),M()]),[[Ae,e.show]])}),L=()=>{const{position:v,transition:F,transitionAppear:X}=e,ne=v==="center"?"van-fade":`van-popup-slide-${v}`;return r(Qe,{name:F||ne,appear:X,onAfterEnter:U,onAfterLeave:Y},{default:B})};return Z(()=>e.show,v=>{v&&!a&&(y(),o.tabindex===0&&ht(()=>{var F;(F=d.value)==null||F.focus()})),!v&&a&&(a=!1,t("close"))}),xe({popupRef:d}),ro(d,()=>e.show&&e.lockScroll),at("popstate",()=>{e.closeOnPopstate&&(m(),c=!1)}),Me(()=>{e.show&&y()}),mt(()=>{c&&(t("update:show",!0),c=!1)}),Je(()=>{e.show&&e.teleport&&(m(),c=!0)}),vt(Tt,()=>e.show),()=>e.teleport?r(_t,{to:e.teleport},{default:()=>[k(),L()]}):r(ve,null,[k(),L()])}});const it=ue(yo);J("picker-toolbar");const bo={title:String,cancelButtonText:String,confirmButtonText:String},rt=Q({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:ge(44),showToolbar:O,swipeDuration:ge(1e3),visibleOptionNum:ge(6)},bo);Q({},rt,{columns:Te(),modelValue:Te(),toolbarPosition:E("top"),columnsFieldNames:Object});let fe=0;function wo(e){e?(fe||document.body.classList.add("van-toast--unclickable"),fe++):fe&&(fe--,fe||document.body.classList.remove("van-toast--unclickable"))}const[Do,le]=J("toast"),So=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],ko={icon:String,show:Boolean,type:E("text"),overlay:Boolean,message:q,iconSize:q,duration:st(2e3),position:E("middle"),teleport:[String,Object],wordBreak:String,className:we,iconPrefix:String,transition:E("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:we,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var ut=te({name:Do,props:ko,emits:["update:show"],setup(e,{emit:t,slots:o}){let i,a=!1;const c=()=>{const m=e.show&&e.forbidClick;a!==m&&(a=m,wo(a))},h=m=>t("update:show",m),d=()=>{e.closeOnClick&&h(!1)},s=()=>clearTimeout(i),f=()=>{const{icon:m,type:g,iconSize:k,iconPrefix:S,loadingType:M}=e;if(m||g==="success"||g==="fail")return r(Ne,{name:m||g,size:k,class:le("icon"),classPrefix:S},null);if(g==="loading")return r(lt,{class:le("loading"),size:k,type:M},null)},y=()=>{const{type:m,message:g}=e;if(o.message)return r("div",{class:le("text")},[o.message()]);if(Ee(g)&&g!=="")return m==="html"?r("div",{key:0,class:le("text"),innerHTML:String(g)},null):r("div",{class:le("text")},[g])};return Z(()=>[e.show,e.forbidClick],c),Z(()=>[e.show,e.type,e.message,e.duration],()=>{s(),e.show&&e.duration>0&&(i=setTimeout(()=>{h(!1)},e.duration))}),Me(c),Xe(c),()=>r(it,ke({class:[le([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:d,onClosed:s,"onUpdate:show":h},he(e,So)),{default:()=>[f(),y()]})}});function xo(){const e=yt({show:!1}),t=a=>{e.show=a},o=a=>{Q(e,a,{transitionAppear:!0}),t(!0)},i=()=>t(!1);return xe({open:o,close:i,toggle:t}),{open:o,close:i,state:e,toggle:t}}function Co(e){const t=gt(e),o=document.createElement("div");return document.body.appendChild(o),{instance:t.mount(o),unmount(){t.unmount(),document.body.removeChild(o)}}}const po={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let _e=[],$o=!1,Ke=Q({},po);const To=new Map;function Io(e){return Bt(e)?e:{message:e}}function Oo(){const{instance:e,unmount:t}=Co({setup(){const o=N(""),{open:i,state:a,close:c,toggle:h}=xo(),d=()=>{},s=()=>r(ut,ke(a,{onClosed:d,"onUpdate:show":h}),null);return Z(o,f=>{a.message=f}),bt().render=s,{open:i,close:c,message:o}}});return e}function Bo(){if(!_e.length||$o){const e=Oo();_e.push(e)}return _e[_e.length-1]}function Ge(e={}){if(!Ot)return{};const t=Bo(),o=Io(e);return t.open(Q({},Ke,To.get(o.type||Ke.type),o)),t}ue(ut);const[Ho,p,ee]=J("calendar"),Po=e=>ee("monthTitle",e.getFullYear(),e.getMonth()+1);function Be(e,t){const o=e.getFullYear(),i=t.getFullYear();if(o===i){const a=e.getMonth(),c=t.getMonth();return a===c?0:a>c?1:-1}return o>i?1:-1}function W(e,t){const o=Be(e,t);if(o===0){const i=e.getDate(),a=t.getDate();return i===a?0:i>a?1:-1}return o}const Se=e=>new Date(e),Ze=e=>Array.isArray(e)?e.map(Se):Se(e);function Ve(e,t){const o=Se(e);return o.setDate(o.getDate()+t),o}const He=e=>Ve(e,-1),dt=e=>Ve(e,1),Pe=()=>{const e=new Date;return e.setHours(0,0,0,0),e};function Ro(e){const t=e[0].getTime();return(e[1].getTime()-t)/(1e3*60*60*24)+1}Q({},rt,{modelValue:Te(),filter:Function,formatter:{type:Function,default:(e,t)=>t}});const Ao=(e,t)=>32-new Date(e,t-1,32).getDate(),[Mo]=J("calendar-day");var zo=te({name:Mo,props:{item:ye(Object),color:String,index:Number,offset:st(0),rowHeight:String},emits:["click"],setup(e,{emit:t,slots:o}){const i=x(()=>{var s;const{item:f,index:y,color:m,offset:g,rowHeight:k}=e,S={height:k};if(f.type==="placeholder")return S.width="100%",S;if(y===0&&(S.marginLeft=`${100*g/7}%`),m)switch(f.type){case"end":case"start":case"start-end":case"multiple-middle":case"multiple-selected":S.background=m;break;case"middle":S.color=m;break}return g+(((s=f.date)==null?void 0:s.getDate())||1)>28&&(S.marginBottom=0),S}),a=()=>{e.item.type!=="disabled"&&t("click",e.item)},c=()=>{const{topInfo:s}=e.item;if(s||o["top-info"])return r("div",{class:p("top-info")},[o["top-info"]?o["top-info"](e.item):s])},h=()=>{const{bottomInfo:s}=e.item;if(s||o["bottom-info"])return r("div",{class:p("bottom-info")},[o["bottom-info"]?o["bottom-info"](e.item):s])},d=()=>{const{item:s,color:f,rowHeight:y}=e,{type:m,text:g}=s,k=[c(),g,h()];return m==="selected"?r("div",{class:p("selected-day"),style:{width:y,height:y,background:f}},[k]):k};return()=>{const{type:s,className:f}=e.item;return s==="placeholder"?r("div",{class:p("day"),style:i.value},null):r("div",{role:"gridcell",style:i.value,class:[p("day",s),f],tabindex:s==="disabled"?void 0:-1,onClick:a},[d()])}}});const[No]=J("calendar-month"),Lo={date:ye(Date),type:String,color:String,minDate:ye(Date),maxDate:ye(Date),showMark:Boolean,rowHeight:q,formatter:Function,lazyRender:Boolean,currentDate:[Date,Array],allowSameDay:Boolean,showSubtitle:Boolean,showMonthTitle:Boolean,firstDayOfWeek:Number};var Eo=te({name:No,props:Lo,emits:["click"],setup(e,{emit:t,slots:o}){const[i,a]=Ht(),c=N(),h=N(),d=Et(h),s=x(()=>Po(e.date)),f=x(()=>ot(e.rowHeight)),y=x(()=>{const _=e.date.getDay();return e.firstDayOfWeek?(_+7-e.firstDayOfWeek)%7:_}),m=x(()=>Ao(e.date.getFullYear(),e.date.getMonth()+1)),g=x(()=>i.value||!e.lazyRender),k=()=>s.value,S=_=>{const T=H=>e.currentDate.some(C=>W(C,H)===0);if(T(_)){const H=He(_),C=dt(_),P=T(H),n=T(C);return P&&n?"multiple-middle":P?"end":n?"start":"multiple-selected"}return""},M=_=>{const[T,H]=e.currentDate;if(!T)return"";const C=W(_,T);if(!H)return C===0?"start":"";const P=W(_,H);return e.allowSameDay&&C===0&&P===0?"start-end":C===0?"start":P===0?"end":C>0&&P<0?"middle":""},$=_=>{const{type:T,minDate:H,maxDate:C,currentDate:P}=e;if(W(_,H)<0||W(_,C)>0)return"disabled";if(P===null)return"";if(Array.isArray(P)){if(T==="multiple")return S(_);if(T==="range")return M(_)}else if(T==="single")return W(_,P)===0?"selected":"";return""},U=_=>{if(e.type==="range"){if(_==="start"||_==="end")return ee(_);if(_==="start-end")return`${ee("start")}/${ee("end")}`}},Y=()=>{if(e.showMonthTitle)return r("div",{class:p("month-title")},[o["month-title"]?o["month-title"]({date:e.date,text:s.value}):s.value])},D=()=>{if(e.showMark&&g.value)return r("div",{class:p("month-mark")},[e.date.getMonth()+1])},B=x(()=>{const _=Math.ceil((m.value+y.value)/7);return Array(_).fill({type:"placeholder"})}),L=x(()=>{const _=[],T=e.date.getFullYear(),H=e.date.getMonth();for(let C=1;C<=m.value;C++){const P=new Date(T,H,C),n=$(P);let u={date:P,type:n,text:C,bottomInfo:U(n)};e.formatter&&(u=e.formatter(u)),_.push(u)}return _}),v=x(()=>L.value.filter(_=>_.type==="disabled")),F=(_,T)=>{if(c.value){const H=Ie(c.value),C=B.value.length,n=(Math.ceil((T.getDate()+y.value)/7)-1)*H.height/C;Pt(_,H.top+n+_.scrollTop-Ie(_).top)}},X=(_,T)=>r(zo,{item:_,index:T,color:e.color,offset:y.value,rowHeight:f.value,onClick:H=>t("click",H)},he(o,["top-info","bottom-info"])),ne=()=>r("div",{ref:c,role:"grid",class:p("days")},[D(),(g.value?L:B).value.map(X)]);return xe({getTitle:k,getHeight:()=>d.value,setVisible:a,scrollToDate:F,disabledDays:v}),()=>r("div",{class:p("month"),ref:h},[Y(),ne()])}});const[Fo]=J("calendar-header");var Vo=te({name:Fo,props:{date:Date,title:String,subtitle:String,showTitle:Boolean,showSubtitle:Boolean,firstDayOfWeek:Number},emits:["clickSubtitle"],setup(e,{slots:t,emit:o}){const i=()=>{if(e.showTitle){const d=e.title||ee("title"),s=t.title?t.title():d;return r("div",{class:p("header-title")},[s])}},a=d=>o("clickSubtitle",d),c=()=>{if(e.showSubtitle){const d=t.subtitle?t.subtitle({date:e.date,text:e.subtitle}):e.subtitle;return r("div",{class:p("header-subtitle"),onClick:a},[d])}},h=()=>{const{firstDayOfWeek:d}=e,s=ee("weekdays"),f=[...s.slice(d,7),...s.slice(0,d)];return r("div",{class:p("weekdays")},[f.map(y=>r("span",{class:p("weekday")},[y]))])};return()=>r("div",{class:p("header")},[i(),c(),h()])}});const jo={show:Boolean,type:E("single"),title:String,color:String,round:O,readonly:Boolean,poppable:O,maxRange:ge(null),position:E("bottom"),teleport:[String,Object],showMark:O,showTitle:O,formatter:Function,rowHeight:q,confirmText:String,rangePrompt:String,lazyRender:O,showConfirm:O,defaultDate:[Date,Array],allowSameDay:Boolean,showSubtitle:O,closeOnPopstate:O,showRangePrompt:O,confirmDisabledText:String,closeOnClickOverlay:O,safeAreaInsetTop:Boolean,safeAreaInsetBottom:O,minDate:{type:Date,validator:Oe,default:Pe},maxDate:{type:Date,validator:Oe,default:()=>{const e=Pe();return new Date(e.getFullYear(),e.getMonth()+6,e.getDate())}},firstDayOfWeek:{type:q,default:0,validator:e=>e>=0&&e<=6}};var Wo=te({name:Ho,props:jo,emits:["select","confirm","unselect","monthShow","overRange","update:show","clickSubtitle"],setup(e,{emit:t,slots:o}){const i=(n,u=e.minDate,b=e.maxDate)=>W(n,u)===-1?u:W(n,b)===1?b:n,a=(n=e.defaultDate)=>{const{type:u,minDate:b,maxDate:w,allowSameDay:V}=e;if(n===null)return n;const R=Pe();if(u==="range"){Array.isArray(n)||(n=[]);const K=i(n[0]||R,b,V?w:He(w)),I=i(n[1]||R,V?b:dt(b));return[K,I]}return u==="multiple"?Array.isArray(n)?n.map(K=>i(K)):[i(R)]:((!n||Array.isArray(n))&&(n=R),i(n))};let c;const h=N(),d=N({text:"",date:void 0}),s=N(a()),[f,y]=Rt(),m=x(()=>e.firstDayOfWeek?+e.firstDayOfWeek%7:0),g=x(()=>{const n=[],u=new Date(e.minDate);u.setDate(1);do n.push(new Date(u)),u.setMonth(u.getMonth()+1);while(Be(u,e.maxDate)!==1);return n}),k=x(()=>{if(s.value){if(e.type==="range")return!s.value[0]||!s.value[1];if(e.type==="multiple")return!s.value.length}return!s.value}),S=()=>s.value,M=()=>{const n=At(h.value),u=n+c,b=g.value.map((I,G)=>f.value[G].getHeight()),w=b.reduce((I,G)=>I+G,0);if(u>w&&n>0)return;let V=0,R;const K=[-1,-1];for(let I=0;I<g.value.length;I++){const G=f.value[I];V<=u&&V+b[I]>=n&&(K[1]=I,R||(R=G,K[0]=I),f.value[I].showed||(f.value[I].showed=!0,t("monthShow",{date:G.date,title:G.getTitle()}))),V+=b[I]}g.value.forEach((I,G)=>{const je=G>=K[0]-1&&G<=K[1]+1;f.value[G].setVisible(je)}),R&&(d.value={text:R.getTitle(),date:R.date})},$=n=>{$e(()=>{g.value.some((u,b)=>Be(u,n)===0?(h.value&&f.value[b].scrollToDate(h.value,n),!0):!1),M()})},U=()=>{if(!(e.poppable&&!e.show))if(s.value){const n=e.type==="single"?s.value:s.value[0];Oe(n)&&$(n)}else $e(M)},Y=()=>{e.poppable&&!e.show||($e(()=>{c=Math.floor(Ie(h).height)}),U())},D=(n=a())=>{s.value=n,U()},B=n=>{const{maxRange:u,rangePrompt:b,showRangePrompt:w}=e;return u&&Ro(n)>+u?(w&&Ge(b||ee("rangePrompt",u)),t("overRange"),!1):!0},L=()=>{var n;return t("confirm",(n=s.value)!=null?n:Ze(s.value))},v=(n,u)=>{const b=w=>{s.value=w,t("select",Ze(w))};if(u&&e.type==="range"&&!B(n)){b([n[0],Ve(n[0],+e.maxRange-1)]);return}b(n),u&&!e.showConfirm&&L()},F=(n,u,b)=>{var w;return(w=n.find(V=>W(u,V.date)===-1&&W(V.date,b)===-1))==null?void 0:w.date},X=x(()=>f.value.reduce((n,u)=>{var b,w;return n.push(...(w=(b=u.disabledDays)==null?void 0:b.value)!=null?w:[]),n},[])),ne=n=>{if(e.readonly||!n.date)return;const{date:u}=n,{type:b}=e;if(b==="range"){if(!s.value){v([u]);return}const[w,V]=s.value;if(w&&!V){const R=W(u,w);if(R===1){const K=F(X.value,w,u);if(K){const I=He(K);W(w,I)===-1?v([w,I]):v([u])}else v([w,u],!0)}else R===-1?v([u]):e.allowSameDay&&v([u,u],!0)}else v([u])}else if(b==="multiple"){if(!s.value){v([u]);return}const w=s.value,V=w.findIndex(R=>W(R,u)===0);if(V!==-1){const[R]=w.splice(V,1);t("unselect",Se(R))}else e.maxRange&&w.length>=+e.maxRange?Ge(e.rangePrompt||ee("rangePrompt",e.maxRange)):v([...w,u])}else v(u,!0)},_=n=>t("update:show",n),T=(n,u)=>{const b=u!==0||!e.showSubtitle;return r(Eo,ke({ref:y(u),date:n,currentDate:s.value,showMonthTitle:b,firstDayOfWeek:m.value},he(e,["type","color","minDate","maxDate","showMark","formatter","rowHeight","lazyRender","showSubtitle","allowSameDay"]),{onClick:ne}),he(o,["top-info","bottom-info","month-title"]))},H=()=>{if(o.footer)return o.footer();if(e.showConfirm){const n=o["confirm-text"],u=k.value,b=u?e.confirmDisabledText:e.confirmText;return r(co,{round:!0,block:!0,type:"primary",color:e.color,class:p("confirm"),disabled:u,nativeType:"button",onClick:L},{default:()=>[n?n({disabled:u}):b||ee("confirm")]})}},C=()=>r("div",{class:[p("footer"),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[H()]),P=()=>r("div",{class:p()},[r(Vo,{date:d.value.date,title:e.title,subtitle:d.value.text,showTitle:e.showTitle,showSubtitle:e.showSubtitle,firstDayOfWeek:m.value,onClickSubtitle:n=>t("clickSubtitle",n)},he(o,["title","subtitle"])),r("div",{ref:h,class:p("body"),onScroll:M},[g.value.map(T)]),C()]);return Z(()=>e.show,Y),Z(()=>[e.type,e.minDate,e.maxDate],()=>D(a(s.value))),Z(()=>e.defaultDate,(n=null)=>{s.value=n,U()}),xe({reset:D,scrollToDate:$,getSelectedDate:S}),nt(Y),()=>e.poppable?r(it,{show:e.show,class:p("popup"),round:e.round,position:e.position,closeable:e.showTitle||e.showSubtitle,teleport:e.teleport,closeOnPopstate:e.closeOnPopstate,safeAreaInsetTop:e.safeAreaInsetTop,closeOnClickOverlay:e.closeOnClickOverlay,"onUpdate:show":_},{default:P}):P()}});const Uo=ue(Wo);function qo(){return Fe.get("home/hotSuggests")}function Yo(){return Fe.get("home/categories")}function Ko(e){return Fe.get("home/houselist",{params:{page:e}})}const Ce=wt("home",{state:()=>({hotSuggests:[],Categories:[],currentPage:1,hotHouseList:[]}),actions:{async fetchHomeAction(){const e=await qo();this.hotSuggests=e.data.data},async fetchHomeCategoriesAction(){const e=await Yo();this.Categories=e.data.data},async fetchHomeHotHouseAction(){const e=await Ko(this.currentPage);this.hotHouseList.push(...e.data.data),this.currentPage++}}});const ae=e=>(ie("data-v-3a56cade"),e=e(),re(),e),Go={class:"search-box"},Zo={class:"location"},Jo=ae(()=>l("span",null,"我的位置",-1)),Qo=ae(()=>l("i",{class:"iconfont icon-dingwei"},null,-1)),Xo=[Jo,Qo],en={class:"left"},tn={class:"start"},on=ae(()=>l("span",{class:"tip"},"入住",-1)),nn={class:"date"},an={class:"stay"},sn={class:"leave"},ln=ae(()=>l("span",{class:"tip"},"离店",-1)),cn={class:"date"},rn=ae(()=>l("div",{class:"price-people border-top-line"},[l("div",{class:"left"},"价格不限"),l("div",{class:"right"},"人数不限")],-1)),un=ae(()=>l("div",{class:"key-word border-top-line"},"关键字/位置/民宿名",-1)),dn={class:"hot-suggest border-top-line"},fn=["onClick"],hn=ae(()=>l("div",{class:""},null,-1)),mn={__name:"SearchBox",setup(e){const t=et(),o=()=>{t.push("/city")},i=()=>{navigator.geolocation.getCurrentPosition(D=>{console.log("获取位置成功:",D)},D=>{console.log("获取位置失败：",D)})},a=Lt(),{currentCity:c}=ce(a),h=tt(),{startDate:d,endDate:s}=ce(h),f=x(()=>De(d.value)),y=x(()=>De(s.value)),m=N(!1),g=D=>{const B=D[0],L=D[1];h.startDate=B,h.endDate=L,m.value=!1,S.value=Ue(B,L)},k=D=>(D.type==="start"?D.bottomInfo="入住":D.type==="end"&&(D.bottomInfo="离店"),D),S=N(Ue(d.value,s.value)),M=Ce(),{hotSuggests:$}=ce(M),U=D=>{t.push({path:"/search",query:{startDate:d.value,endDate:s.value,hotSuggests:D}})},Y=()=>{t.push({path:"/search",query:{startDate:d.value,endDate:s.value,currentCity:c.value.cityName}})};return(D,B)=>{const L=Uo;return z(),j("div",Go,[l("div",Zo,[l("div",{class:"city",onClick:o},A(be(c).cityName),1),l("div",{class:"mycity",onClick:i},Xo)]),l("div",{class:"date-range border-top-line",onClick:B[0]||(B[0]=v=>m.value=!0)},[l("div",en,[l("div",tn,[on,l("span",nn,A(f.value),1)]),l("div",an,"共"+A(S.value)+"晚",1)]),l("div",sn,[ln,l("span",cn,A(y.value),1)])]),r(L,{show:m.value,"onUpdate:show":B[1]||(B[1]=v=>m.value=v),type:"range",round:!1,color:"#ff9854",formatter:k,onConfirm:g},null,8,["show"]),rn,un,l("div",dn,[(z(!0),j(ve,null,ze(be($),(v,F)=>(z(),j("div",{key:F,class:"item",style:Dt({color:v.tagText.color,background:v.tagText.background.color}),onClick:X=>U(v.tagText.text)},A(v.tagText.text),13,fn))),128))]),l("div",{class:"searchbtn",onClick:Y},"开始搜索"),hn])}}},vn=oe(mn,[["__scopeId","data-v-3a56cade"]]);const _n={class:"categories"},gn=["src"],yn={class:"text"},bn={__name:"Categories",setup(e){const t=Ce(),{Categories:o}=ce(t);return(i,a)=>(z(),j("div",_n,[(z(!0),j(ve,null,ze(be(o),c=>(z(),j("div",{key:c.id,class:"categories-item"},[l("img",{src:c.pictureUrl,alt:""},null,8,gn),l("div",yn,A(c.title),1)]))),128))]))}},wn=oe(bn,[["__scopeId","data-v-ef461594"]]);const Dn=e=>(ie("data-v-4a62c5ef"),e=e(),re(),e),Sn={class:"hot-house-item-v3"},kn={class:"house-item-v3"},xn={class:"img-item"},Cn=["src"],pn={class:"house-info"},$n={class:"location"},Tn=Dn(()=>l("i",{class:"iconfont icon-spiritling-dingwei"},null,-1)),In={class:"name"},On={class:"summary"},Bn={class:"price"},Hn={class:"final-price"},Pn={class:"product-price"},Rn={class:"price-tip-badge"},An={__name:"HotHouseV3",props:{itemData:{typeof:Object,default:()=>({})}},setup(e){return(t,o)=>{var i,a;return z(),j("div",Sn,[l("div",kn,[l("div",xn,[l("img",{src:e.itemData.image.url,alt:""},null,8,Cn)]),l("div",pn,[l("div",$n,[Tn,l("span",null,A(e.itemData.location),1)]),l("div",In,A(e.itemData.houseName),1),l("div",On,A(e.itemData.summaryText),1),l("div",Bn,[l("span",Hn,"￥"+A(e.itemData.finalPrice),1),l("span",Pn,"￥"+A(e.itemData.productPrice),1),l("span",Rn,A((a=(i=e.itemData)==null?void 0:i.priceTipBadge)==null?void 0:a.text),1)])])])])}}},Mn=oe(An,[["__scopeId","data-v-4a62c5ef"]]);const zn={class:"hot-house-item"},Nn={class:"house-item"},Ln={class:"img-item"},En=["src"],Fn={class:"house-info"},Vn={class:"summary"},jn={class:"name"},Wn={class:"hosue-score"},Un={class:"price"},qn={__name:"HotHouseV9",props:{houseData:{typeof:Object,default:()=>({})}},setup(e){const t=e;return(o,i)=>{const a=Ft;return z(),j("div",zn,[l("div",Nn,[l("div",Ln,[l("img",{src:t.houseData.image.url,alt:""},null,8,En)]),l("div",Fn,[l("div",Vn,A(t.houseData.summaryText),1),l("div",jn,A(t.houseData.houseName),1),l("div",Wn,[r(a,{"model-value":Number(t.houseData.commentScore),readonly:"","allow-half":"",size:"14",color:"#ff5000"},null,8,["model-value"]),l("span",Un,"￥"+A(t.houseData.finalPrice),1)])])])])}}},Yn=oe(qn,[["__scopeId","data-v-59bb5e38"]]);const Kn=e=>(ie("data-v-78882a71"),e=e(),re(),e),Gn={class:"hot-house"},Zn=Kn(()=>l("h2",null,"热门精选",-1)),Jn={class:"list"},Qn={__name:"HotHouseList",setup(e){const t=Ce(),{hotHouseList:o}=ce(t),i=et(),a=c=>{i.push(`/detail/${c.houseId}`)};return(c,h)=>(z(),j("div",Gn,[Zn,l("div",Jn,[(z(!0),j(ve,null,ze(be(o),d=>(z(),j(ve,{key:d.data.houseId},[d.discoveryContentType===9?(z(),We(Yn,{key:0,"house-data":d.data,onClick:s=>a(d.data)},null,8,["house-data","onClick"])):d.discoveryContentType===3?(z(),We(Mn,{key:1,"item-data":d.data,onClick:s=>a(d.data)},null,8,["item-data","onClick"])):St("",!0)],64))),128))])]))}},Xn=oe(Qn,[["__scopeId","data-v-78882a71"]]);const pe=e=>(ie("data-v-6f5bd53d"),e=e(),re(),e),ea={class:"search-bar"},ta={class:"content"},oa={class:"left"},na={class:"left-top"},aa=pe(()=>l("span",{class:"text"},"住",-1)),sa={class:"start-date"},la={class:"left-bottom"},ca=pe(()=>l("span",{class:"text"},"离",-1)),ia={class:"start-date"},ra=pe(()=>l("i",{class:"iconfont icon-youxiasanjiao"},null,-1)),ua=pe(()=>l("div",{class:"right"},[l("div",{class:"keyword"},[l("span",null,"关键字/位置/民宿"),l("i",{class:"iconfont icon-sousuo"})])],-1)),da={__name:"SearchBar",setup(e){const t=tt(),{startDate:o,endDate:i}=ce(t),a=x(()=>De(o.value,"MM.DD")),c=x(()=>De(i.value,"MM.DD"));return(h,d)=>(z(),j("div",ea,[l("div",ta,[l("div",oa,[l("div",na,[aa,l("span",sa,A(a.value),1)]),l("div",la,[ca,l("span",ia,A(c.value),1),ra])]),ua])]))}},fa=oe(da,[["__scopeId","data-v-6f5bd53d"]]);function ha(e){let t=window;const o=N(!1),i=N(0),a=N(0),c=N(0),h=Vt(()=>{t===window?(i.value=document.documentElement.clientHeight,a.value=document.documentElement.scrollTop+5,c.value=document.documentElement.scrollHeight):(i.value=t.clientHeight,a.value=t.scrollTop+5,c.value=t.scrollHeight),i.value+a.value>=c.value&&(o.value=!0)},100);return Me(()=>{e&&(t=e.value),t.addEventListener("scroll",h)}),Xe(()=>{window.removeEventListener("scroll",h)}),{isReachBottom:o,clientHeight:i,scrollTop:a,scrollHeight:c}}const ma=e=>(ie("data-v-0583d03f"),e=e(),re(),e),va={class:"home"},_a=ma(()=>l("div",{class:"banner"},[l("img",{src:jt,alt:""})],-1)),ga={__name:"Home",setup(e){const t=Ce();t.fetchHomeAction(),t.fetchHomeCategoriesAction(),t.fetchHomeHotHouseAction();const{isReachBottom:o,scrollTop:i}=ha();Z(o,c=>{c&&t.fetchHomeHotHouseAction().then(()=>{o.value=!1})});const a=x(()=>i.value>498);return(c,h)=>(z(),j("div",va,[r(Zt),_a,r(vn),r(wn),Re(r(fa,null,null,512),[[Ae,a.value]]),r(Xn)]))}},ka=oe(ga,[["__scopeId","data-v-0583d03f"]]);export{ka as default};
